\subsection{Formal Model: Observations and Equivalence}

Let $\mathcal{V}$ denote the space of all program values, and let $\mathcal{Q}$ be the shape query set (Definition 1).

\begin{definition}[Shape equivalence]
Values $x, y \in \mathcal{V}$ are shape-equivalent, written $x \sim y$, iff $q(x) = q(y)$ for all shape queries $q \in \mathcal{Q}$.
\end{definition}

A shape-only procedure can only distinguish values that are not shape-equivalent. Therefore, any property computed by a shape-only procedure must be constant on $\sim$-equivalence classes.

\subsection{Witness Cost}

A \emph{witness} for a property $P$ is a procedure that, given access to a value, computes $P$ using primitive queries.

\begin{definition}[Witness cost]
The witness cost of property $P$ is $W(P) = \min \{ c(w) : w \text{ is a witness procedure for } P \}$, where $c(w)$ is the number of primitive queries (shape queries or nominal-tag accesses) required by $w$.
\end{definition}

\begin{remark}[Connection to algorithmic information theory]
Witness cost is related to Kolmogorov complexity, but measures query count under a fixed primitive set rather than description length under a universal machine. This makes $W$ a concrete, computable quantity suitable for comparing practical systems.
\end{remark}

\subsection{Rate–Witness–Distortion Tradeoff}

We analyze type identity checking under three dimensions:

\begin{definition}[Tag length]
The tag length $L$ is the number of machine words required to store a type identifier per value. (Under a fixed word size $w$, this corresponds to $\Theta(w)$ bits.)
\end{definition}

\begin{definition}[Witness cost]
The witness cost $W$ is the minimum number of primitive queries required to implement type identity checking (Definition above).
\end{definition}

\begin{definition}[Distortion]
The distortion $D$ is a worst-case semantic failure flag:
\[
D = 0 \iff \forall v_1, v_2 \,[\, \text{type}(v_1) = \text{type}(v_2) \Rightarrow \text{behavior}(v_1) \equiv \text{behavior}(v_2) \,]
\]
Otherwise $D = 1$. Here $\text{behavior}(v)$ denotes the observable behavior of $v$ under program execution (e.g., method dispatch outcomes).
\end{definition}

A type system is characterized by a point $(L, W, D)$ in this three-dimensional space. The question is: which points are achievable, and which are Pareto-optimal?

